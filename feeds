#!/usr/bin/env node
const program = require('commander')
const packager = require('./package.json')
const migrate = require('./lib/migrate')
const logger = require('./lib/config/logger')('./feeds')

program
  .version(packager.version, '-v, --version')

program
  .command('migrate <up/down/check>')
  .action((direction) => {
    migrate.load(direction)
  })

program.parse(process.argv)

if (process.argv.length === 2) {
  logger.info(`Running app`)
  // eslint-disable-next-line global-require
  require('./lib/server')
}